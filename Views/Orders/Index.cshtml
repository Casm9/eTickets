@model List<Order>

@{
	ViewData["Title"] = "All orders";
}

<div id="history-container">
	<h2>Order History</h2>

	<table>
		<thead>
			<tr>
				<th>Order ID</th>
				<th>Items</th>
				<th>Total</th>
				<th>User</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var order in Model)
			{
				<tr>
					<td>@order.Id</td>
					<td>
						<ul style="list-style-type: none">
							@foreach (var item in order.OrderItems)
							{
								<li>
									<div>
										<span>@item.Amount</span> [@item.Price.ToString("c")] - @item.Movie.Name
									</div>
								</li>
							}
						</ul>
					</td>
					<td>@order.OrderItems.Select(m => m.Movie.Price * m.Amount).Sum().ToString("c")</td>
					<td> - </td>
				</tr>
			}
		</tbody>
	</table>
</div>